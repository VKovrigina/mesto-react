{"version":3,"sources":["components/Header.js","components/Card.js","contexts/CurrentUserContext.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","hooks/useFormWithValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","utils/api.js","utils/constants.js","components/App.js","index.js","images/logo.svg"],"names":["Header","className","src","headerLogo","alt","Card","props","onCardClick","onCardLike","onCardDelete","link","name","_id","likes","owner","userId","isLiked","some","i","isOwn","type","onClick","aria-label","length","CurrentUserContext","React","createContext","Main","onEditProfile","onAddPlace","onEditAvatar","initialCards","currentUser","useContext","avatar","about","map","card","key","Footer","ImagePopup","onClose","isOpen","closeByEscAndOverlay","useEffect","PopupWithForm","title","children","buttonText","onSubmit","noValidate","method","action","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","target","value","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","e","preventDefault","onChange","id","placeholder","minLength","maxLength","required","disabled","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","DeleteCardPopup","buttonFocusRef","useRef","current","focus","ref","api","options","this","_baseUrl","baseUrl","_headers","headers","_authorization","authorization","res","ok","json","Promise","reject","status","err","console","log","fetch","then","_handleResponse","catch","_handleResponseError","body","JSON","stringify","cardId","App","setCurrentUser","cards","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPhotoPopupOpen","setIsPhotoPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","selectedCard","setSelectedCard","cardForDelete","setCardForDelete","closeAllPopups","closePopupByEscAndOverlay","handleEscClose","closeByOverlay","classList","contains","document","addEventListener","removeEventListener","all","getUserInfo","getInitialCards","userInfo","cardsInfo","error","Provider","cardLikes","generateNewCards","newCard","newCards","item","deleteLike","putLike","idCard","editProfile","editAvatar","createCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.8441c622.chunk.js","sourcesContent":["import React from 'react';\nimport headerLogo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n        <img className =\"header__logo\" src={headerLogo}  alt=\"Логотип сайта Место Россия.\" />\n    </header>\n  );\n}\n\nexport default Header;","import React from \"react\";\n\nfunction Card(props) {\n  const { onCardClick, onCardLike, onCardDelete, link, name, _id, likes, owner, userId } = props;\n\n  function handleClick() {\n    onCardClick(name, link);\n  }\n\n  function handleLikeClick() {\n    onCardLike(_id, likes);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(_id);\n  }\n\n  const isLiked = likes.some(i => i._id === userId);\n\n  const isOwn = owner._id === userId;\n\n  return (\n    <article className=\"card\">\n      {isOwn && <button className=\"card__button-delete\" type=\"button\" onClick={handleDeleteClick} aria-label=\"Удалить\"></button>}\n      <img className=\"card__img\" alt={name} src={link} onClick={handleClick} />\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{name}</h2>\n          <div className=\"card__likes\">\n            <button className={`card__button-like ${isLiked && `card__button-like_active`}`} \n            type=\"button\" aria-label=\"Нравится\"\n            onClick={handleLikeClick}></button>\n            <div className=\"card__num-likes\">{likes.length}</div>\n          </div>\n      </div>\n    </article>\n  );\n}\n\nexport default Card;","import React from 'react';\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport Card from './Card';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, initialCards, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n\n        <section className=\"profile\">\n          <button className=\"profile__avatar-button\" onClick={onEditAvatar}>\n            <img className=\"profile__avatar\" alt=\"Фотография пользователя\" src={currentUser && currentUser.avatar}/>\n          </button>\n          <div className=\"profile__info\">\n            <h1 className=\"profile__name\">{currentUser && currentUser.name}</h1>\n            <button className=\"profile__edit-button button\" type=\"button\" aria-label=\"Изменить\" \n            onClick={onEditProfile}></button>\n            <p className=\"profile__job\">{currentUser && currentUser.about}</p>\n          </div>\n          <button className=\"profile__add-button button\" type=\"button\" aria-label=\"Добавить\" \n          onClick={onAddPlace}></button>\n        </section>\n\n        <section className=\"cards\">\n        { initialCards.map((card) => \n          <Card \n          key={card._id}\n          onCardClick={onCardClick}\n          onCardLike={onCardLike}\n          onCardDelete={onCardDelete}\n          {...card}\n          userId={currentUser._id} />)\n        }\n        </section>\n\n    </main>\n  );\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n        <p className=\"footer__copyright\">&#169;2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from 'react';\n\nfunction ImagePopup({card, onClose, isOpen, closeByEscAndOverlay}) {\n\n  React.useEffect(() => {\n    closeByEscAndOverlay();\n  })\n\n  return (\n    <div className={`popup popup_photo ${isOpen && `popup_open`}`}>\n      <div className=\"popup__container\">\n        <button \n          className=\"popup__close-button button\"\n          type=\"button\" \n          aria-label=\"Закрыть\"\n          onClick={onClose}>\n        </button>\n        <img\n          className=\"popup__img\"\n          alt={card.name} src={card.link} />\n        <p className=\"popup__photo-title\">{card.name}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;","import React from 'react';\n\nfunction PopupWithForm({ \n  name, \n  title, \n  buttonText, \n  children, \n  onClose, \n  isOpen, \n  onSubmit, \n  closeByEscAndOverlay \n}) {\n\n  React.useEffect(() => {\n    closeByEscAndOverlay();\n  })\n\n  return (\n    <div className={`popup popup_${name} popup_form ${isOpen && `popup_open`}`}>\n    <div className=\"popup__container\">\n      <button \n        className=\"popup__close-button button\" \n        type=\"button\" \n        aria-label=\"Закрыть\"\n        onClick= {onClose}>\n      </button>\n      <form noValidate className={`popup__form popup__form_${name}`} name={name} method=\"get\" action=\"#\" onSubmit={onSubmit}>\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n      </form>\n    </div>\n  </div>\n  );\n}\n\nexport default PopupWithForm;","import React, { useCallback } from \"react\";\n\nexport function useFormWithValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n  \n    const handleChange = (event) => {\n      const target = event.target;\n      const name = target.name;\n      const value = target.value;\n      setValues({...values, [name]: value});\n      setErrors({...errors, [name]: target.validationMessage });\n      setIsValid(target.closest(\"form\").checkValidity());\n    };\n  \n    const resetForm = useCallback(\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\n        setValues(newValues);\n        setErrors(newErrors);\n        setIsValid(newIsValid);\n      },\n      [setValues, setErrors, setIsValid]\n    );\n  \n    return { values, handleChange, errors, isValid, resetForm };\n  }","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\n\nfunction EditProfilePopup({onClose, isOpen, onUpdateUser, closeByEscAndOverlay}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n  const {values, handleChange, errors, isValid, resetForm} = useFormWithValidation()\n\n  React.useEffect(() => {\n    if (currentUser) {\n      resetForm(currentUser)\n    }\n  }, [currentUser, onClose, resetForm]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateUser({\n      name: values.name,\n      about: values.about\n    });\n    }\n\n  return (\n    <PopupWithForm\n      name='profile' \n      title='Редактировать профиль'\n      onClose={onClose} \n      isOpen={isOpen}\n      onSubmit={handleSubmit}\n      closeByEscAndOverlay={closeByEscAndOverlay}>\n      <input\n        value={values.name || ''}\n        onChange={handleChange}\n        type=\"text\"\n        name=\"name\"\n        className=\"popup__input popup__input_type_name\"\n        id=\"name-input\"\n        placeholder=\"ФИО\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        required />\n      <span className=\"popup__input-error\" id=\"name-input-error\">{errors.name || ''}</span>\n      <input\n        value={values.about || ''}\n        onChange={handleChange}\n        type=\"text\"\n        name=\"about\"\n        className=\"popup__input popup__input_type_job\"\n        id=\"job-input\"\n        placeholder=\"О себе\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        required />\n      <span className=\"popup__input-error\" id=\"job-input-error\">{errors.about || ''}</span>\n      <button className={`popup__form-button ${!isValid && 'popup__form-button_inactive'}`} type=\"submit\" aria-label=\"Сохранить\" disabled={!isValid}>Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\n\nfunction EditAvatarPopup({onClose, isOpen, onUpdateAvatar, closeByEscAndOverlay}) {\n    const {values, handleChange, errors, isValid, resetForm} = useFormWithValidation()\n\n    React.useEffect(() => {\n        resetForm();\n    }, [onClose, resetForm, isOpen]);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        onUpdateAvatar({\n          avatar: values.avatar\n        });\n    }\n\n    return (\n    <PopupWithForm \n        name='edit-avatar' title='Сменить аватар'\n        onClose={onClose} isOpen={isOpen} onSubmit={handleSubmit}\n        closeByEscAndOverlay={closeByEscAndOverlay}>\n        <input\n        value={values.avatar || ''}\n        onChange={handleChange}\n        type=\"url\"\n        name=\"avatar\"\n        className='popup__input popup__input_type_avatar'\n        id=\"avatar-input\"\n        placeholder=\"https://...\"\n        required />\n        <span className=\"popup__input-error\" id=\"avatar-input-error\">{errors.avatar}</span>\n        <button className={`popup__form-button ${!isValid && 'popup__form-button_inactive'}`} type=\"submit\" aria-label=\"Сохранить\" disabled={!isValid}>Сохранить</button>\n    </PopupWithForm>\n    );\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\n\nfunction AddPlacePopup({onClose, isOpen, onAddPlace, closeByEscAndOverlay}) {\n\n  const {values, handleChange, errors, isValid, resetForm} = useFormWithValidation();\n\n  React.useEffect(() => {\n    resetForm();\n  }, [isOpen, resetForm]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      name: values.name,\n      link: values.link\n    });\n  }\n\n  return (\n    <PopupWithForm \n      name='place' title='Новое место'\n      onClose={onClose}\n      isOpen={isOpen}\n      onSubmit={handleSubmit}\n      closeByEscAndOverlay={closeByEscAndOverlay}>\n      <input\n        value={values.name || ''}\n        onChange={handleChange}\n        type=\"text\"\n        name=\"name\"\n        className=\"popup__input popup__input_type_title\"\n        id=\"title-input\"\n        placeholder=\"Название\"\n        minLength=\"1\"\n        maxLength=\"30\"\n      required/>\n      <span className=\"popup__input-error\" id=\"title-input-error\">{errors.name || ''}</span>\n      <input\n        value={values.link || ''}\n        onChange={handleChange}\n        type=\"url\"\n        name=\"link\"\n        className=\"popup__input popup__input_type_img\"\n        id=\"img-input\"\n        placeholder=\"Ссылка на картинку\"\n      required />\n      <span className=\"popup__input-error\" id=\"img-input-error\">{errors.link}</span>\n      <button className={`popup__form-button ${!isValid && 'popup__form-button_inactive'}`} type=\"submit\" aria-label=\"Создать\" disabled={!isValid}>Создать</button>\n  </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction DeleteCardPopup({onClose, isOpen, onSubmit, closeByEscAndOverlay}) {\n\n    const buttonFocusRef = React.useRef();\n\n    React.useEffect(() => {\n        buttonFocusRef.current.focus();\n    });\n\n    return (\n    <PopupWithForm\n        name='delete-card'\n        title='Вы уверены?'\n        buttonText='Да'\n        closeByEscAndOverlay={closeByEscAndOverlay}\n        onClose={onClose}\n        isOpen={isOpen}\n        onSubmit={onSubmit}>\n            <button className=\"popup__form-button\" type=\"submit\" aria-label=\"Да\" ref={buttonFocusRef}>Да</button>\n    </PopupWithForm>        \n    );\n}\n\nexport default DeleteCardPopup;","import {apiOptions} from './constants'\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n    this._authorization = this._headers.authorization;\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.status)\n    }\n  }\n\n  _handleResponseError(err) {\n    console.log(`Ошибка: ${err}`);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`,\n    {\n      headers: {\n        authorization: this._authorization\n      }\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._authorization\n      }\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError)\n  }\n\n  editProfile(values) {\n    return fetch(`${this._baseUrl}/users/me`, {\n    method: 'PATCH',\n    headers: this._headers,\n    body: JSON.stringify(\n      values\n    )\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError)\n  }\n\n  createCard(values) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(\n        values\n      )\n      })\n      .then(this._handleResponse)\n      .catch(this._handleResponseError)\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n      .then(this._handleResponse)\n      .catch(this._handleResponseError)\n  }\n\n  editAvatar(values) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n    method: 'PATCH',\n    headers: this._headers,\n    body: JSON.stringify(\n      values\n    )\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError)\n  }\n\n  putLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n      })\n      .then(this._handleResponse)\n      .catch(this._handleResponseError)\n  }\n\n  deleteLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n      .then(this._handleResponse)\n      .catch(this._handleResponseError)\n  }\n}\n\n \nconst api = new Api(apiOptions);\nexport default api;","\n//формы\nexport const formProfileSelector = '.popup__form_profile';\nexport const formPlaceSelector = '.popup__form_place';\nexport const formAvatarSelector = '.popup__form_avatar';\n//попапы\nexport const popupProfileSelector = '.popup_profile';\nexport const popupPlaceSelector = '.popup_place';\nexport const popupPhotoSelector = '.popup_photo';\nexport const popupDeleteSelector = '.popup_delete-card';\nexport const popupProfileAvatarSelector = '.popup_edit-avatar';\n//кнопки\nexport const buttonEditSelector = '.profile__edit-button';\nexport const buttonAddSelector = '.profile__add-button';\n//поля форм\nexport const nameInputSelector = '.popup__input_type_name';\nexport const jobInputSelector = '.popup__input_type_job';\n//контэйнер для карточек\nexport const cardContainer = '.cards';\nexport const popupPhotoImgSelector = '.popup__img';\nexport const popupPhotoTitleSelector = '.popup__photo-title';\nexport const avatarSelector = '.profile__avatar';\nexport const avatarButtonSelector = '.profile__avatar-button';\nexport const profileNameSelector = '.profile__name';\nexport const profileAboutSelector = '.profile__job';\n\nexport const formValidationOptions = {\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__form-button',\n  inactiveButtonClass: 'popup__form-button_inactive',\n  inputErrorClass: 'popup__input_type_error'\n};\n\nexport  const apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\n  headers: {\n    authorization: '64f8b885-2658-44d6-bc45-dfe390bdb5b7',\n    'Content-Type': 'application/json'\n  }\n};\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n\n  const [currentUser, setCurrentUser] = React.useState(null);\n  const [cards, setCards] = React.useState(null); \n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isPhotoPopupOpen, setIsPhotoPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cardForDelete, setCardForDelete] = React.useState({});\n\n  React.useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n    .then(([userInfo, cardsInfo]) => {\n      setCurrentUser(userInfo);\n      setCards(cardsInfo);\n    })\n    .catch(err => console.error(err))\n  },[]);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(name, link) {\n    setSelectedCard(\n      {name: name,\n      link: link});\n    setIsPhotoPopupOpen(true);\n  }\n\n  function handleDeleteCardClick(idCard) {\n    setCardForDelete(\n      {id: idCard});\n    setIsDeleteCardPopupOpen(true);\n  }\n  \n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsPhotoPopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n  }\n\n  function closePopupByEscAndOverlay() {\n    function handleEscClose(e) {\n      if (e.key === \"Escape\") {\n        closeAllPopups()\n      }\n    }\n\n    function closeByOverlay(e) {\n      if (e.target.classList.contains(`popup_open`)) {\n        closeAllPopups()\n      }\n    }\n\n    document.addEventListener('click', closeByOverlay);\n    document.addEventListener('keydown', handleEscClose);\n\n    return () => {\n      document.removeEventListener('keydown', handleEscClose);\n      document.removeEventListener('click', closeByOverlay);\n    }\n  }\n\n  function handleUpdateUser(values) {\n    api.editProfile(values)\n    .then(res => {\n      setCurrentUser({\n        ...currentUser,\n        name: res.name,\n        about: res.about\n      });\n      closeAllPopups();\n    })\n    .catch(err => console.error(err))\n\n  }\n\n  function handleUpdateAvatar(values) {\n    api.editAvatar(values)\n    .then(res => {\n      setCurrentUser({\n        ...currentUser,\n        avatar: res.avatar\n      });\n      closeAllPopups();\n    })\n    .catch(err => console.error(err))\n\n  }\n\n  function handleCardLike(cardId, cardLikes) {\n    const isLiked = cardLikes.some(i => i._id === currentUser._id);\n\n    function generateNewCards(newCard) {\n      const newCards = cards.map((item) => item._id === cardId ? newCard : item);\n      setCards(newCards);\n    }\n\n    isLiked\n    ?  api.deleteLike(cardId)\n      .then(newCard => {\n        generateNewCards(newCard)\n      })\n      .catch(err => console.error(err))\n    :  api.putLike(cardId)\n      .then(newCard => {\n        generateNewCards(newCard)\n      })\n      .catch(err => console.error(err))\n  }\n\n  function handleCardDelete(e) {\n    e.preventDefault();\n    api.deleteCard(cardForDelete.id)\n    .then(() => {\n      const newCards = cards.filter((item) => item._id !== cardForDelete.id);\n      setCards(newCards);\n      closeAllPopups();\n    })\n    .catch(err => console.error(err))\n\n  }\n\n  function handleAddPlaceSubmit(values) {\n    api.createCard(values)\n    .then(newCard => {\n      setCards([newCard, ...cards]);\n    })\n    .catch(err => console.error(err));\n\n    closeAllPopups();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n    <div className=\"page\">\n\n      <Header />\n\n      {/** MAIN */}\n      { currentUser && cards && <Main \n      onEditAvatar={handleEditAvatarClick}\n      onEditProfile={handleEditProfileClick}\n      onAddPlace={handleAddPlaceClick}\n      onCardClick={handleCardClick}\n      initialCards={cards}\n      onCardLike={handleCardLike}\n      onCardDelete={handleDeleteCardClick}/>}\n\n      {/** EditProfilePopup */}\n      { currentUser && <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n        closeByEscAndOverlay={closePopupByEscAndOverlay}/>\n      }\n\n      {/** EditAvatarPopup */}\n      { currentUser && <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n        closeByEscAndOverlay={closePopupByEscAndOverlay}/>\n      }\n\n      <AddPlacePopup\n      isOpen={isAddPlacePopupOpen}\n      onClose={closeAllPopups}\n      onAddPlace={handleAddPlaceSubmit}\n      closeByEscAndOverlay={closePopupByEscAndOverlay}/>\n\n      <ImagePopup card={selectedCard}\n      onClose={closeAllPopups}\n      isOpen={isPhotoPopupOpen}\n      closeByEscAndOverlay={closePopupByEscAndOverlay}/>\n\n      <DeleteCardPopup\n        closeByEscAndOverlay={closePopupByEscAndOverlay}\n        onClose={closeAllPopups}\n        isOpen={isDeleteCardPopupOpen}\n        onSubmit={handleCardDelete}>\n      </DeleteCardPopup>\n\n      <Footer />\n\n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","module.exports = __webpack_public_path__ + \"static/media/logo.2b1f7ee5.svg\";"],"sourceRoot":""}